title: Create "Download" Link
date: 2016-04-22 18:53:03
tags: [HTML5, JavaScript]
categories: [JavaScript]
---
"Download" link can be generated by HTML5 "a" tag with "download" attribute OR JavaScript code.

## HTML5
<pre class="brush: xml;">
&lt;a href="./sample.txt" download="SAMPLE">Download&lt;/a>
</pre>

This should work in most of modern browsers except IE. JavaScript code can replace this on these exceptions.

## JavaScript

The file to download is saved in memory first with <a href="https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest">XMLHttpRequest</a> and then saved as a file with <a href="https://developer.mozilla.org/en-US/docs/Web/API/URL/createObjectURL">URL.createObjectURL</a>. (<a href="https://msdn.microsoft.com/en-US/library/hh779016.aspx">msSaveBlob</a> in IE/Edge)

### JavaScript Code

<pre class="brush: js;">
function downloadFile(url, filename) {

  var xhr = new XMLHttpRequest();
  xhr.open("GET", url, true);
  xhr.responseType = "blob";
  xhr.onload = function (oEvent) {
    var blob = xhr.response;
    if (window.navigator.msSaveBlob) {
      // IE/Edge
      window.navigator.msSaveBlob(blob, filename);
    }
    else {
      var objectURL = window.URL.createObjectURL(blob);
      var link = document.createElement("a");
      document.body.appendChild(link);
      link.href = objectURL;
      link.download = filename;
      link.click();
      document.body.removeChild(link);
    }
  };
  xhr.send();
}
</pre>

### HTML
<pre class="brush: xml;">
&lt;a href="./sample.txt" download="SAMPLE"
   onclick="javascript: downloadFile('./sample.txt', 'sample.txt'); return false;"
   >Download&lt;/a>
</pre>